\tikzset{
  every matrix/.style =
  { ampersand replacement = \&,
    matrix of nodes,
    nodes in empty cells },
  box/.style =
  { draw, rectangle,
    rounded corners = 1mm,
%%     font = \large,
    minimum width  = 2cm,
    minimum height = 1cm },
  to/.style = {->, thick}
}

\newcommand\implementation{
  \matrix (mat) [row sep = 1.2cm, every node/.style = {align=center}, font=\Large] {
    \node (src) {Agda Input}; \\
    \node[box] (agda) {Agda}; \\
    \node[box] (trans) {\agdatohs}; \\
    \node (hs) {Haskell}; \\
  };
  \path
  (src)
    edge[to]
    node[right] {surface syntax \hfill \largeImg{agda2hs-qrcode} }
  (agda) (agda)
    edge[to]
    node[right] {(type-checked) internal core representation}
  (trans) (trans)
    edge[to, color=mLightBrown]
    node[right] {\hs{:: Agda.AST -> Agda.TC Haskell.AST}}
  (hs)
  ;
}
