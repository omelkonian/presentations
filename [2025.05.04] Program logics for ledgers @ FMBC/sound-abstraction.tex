\documentclass[main]{subfiles}
\begin{document}
\begin{code}[hide]%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Init}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{SetAsType}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{L.Mem}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{Unary}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à©\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Lists.Membership}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.General}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.InferenceRules}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Functor}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.FromList}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.ToList}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.DecEq}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Monad}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Maybes}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Membership}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àâ?\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Bags}\AgdaSpace{}%
\AgdaSymbol{as}\AgdaSpace{}%
\AgdaModule{B}\<%
\\
\>[0]\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Maps}\AgdaSpace{}%
\AgdaSymbol{as}\AgdaSpace{}%
\AgdaModule{M}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Common}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{‚ÑÇ}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{UTxOErr.UTxO}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{UTxOErr.Ledger}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{VL}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaDatatype{ValidLedger}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{UTxOErr.HoareLogic}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{‚ÑÇ}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}‚ä£\AgdaUnderscore{}‚à∑\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{ùî∏}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{ValueSepUTxO.UTxO}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{ValueSepUTxO.Ledger}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{VL}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaDatatype{ValidLedger}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{ValueSepUTxO.UTxO}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[2]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{ValueSepUTxO.HoareLogic}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{ùî∏}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}‚ä£\AgdaUnderscore{}‚à∑\AgdaUnderscore{}}}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ abstracting\ away\ implementation\ details}\<%
\\
\>[0]\AgdaKeyword{private}\AgdaSpace{}%
\AgdaKeyword{variable}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{s‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.S}\<%
\\
%
\>[2]\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.L}\<%
\\
%
\>[2]\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.Tx}\<%
\\
%
\>[2]\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred‚ÇÄ}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\<%
\end{code}
\begin{frame}{Sound Abstraction: States and Validity}
\begin{code}%
\>[0]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.S}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.valuesÀ¢}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{‚â°-Reasoning}\<%
\end{code}
\begin{code}%
\>[0]\<%
\\
\>[0]\AgdaFunction{absVT}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{‚àÉ}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{ùî∏.IsValidTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{absVT}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaKeyword{record}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{\{}\AgdaSpace{}%
\AgdaField{validOutputRefs}%
\>[24]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{vor‚Ä≤}\<%
\\
%
\>[2]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{preservesValues}%
\>[24]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{pv‚Ä≤}\<%
\\
%
\>[2]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{allInputsValidate}%
\>[24]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{L.All.tabulate}\AgdaSpace{}%
\AgdaFunction{aiv‚Ä≤}\<%
\\
%
\>[2]\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{validateValidHashes}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{L.All.tabulate}\AgdaSpace{}%
\AgdaFunction{vvh‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{\}}\<%
\\
%
\>[2]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{‚à£absVT‚à£}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.inputs}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{os}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{frg}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.forge}\<%
\\
%
\>[4]\AgdaFunction{vor}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.validOutputRefs}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{goI}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.TxInput}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.TxOutput}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{ùî∏.TxInput}\<%
\\
%
\>[4]\AgdaFunction{goI}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{outputRef}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{};}\AgdaSpace{}%
\AgdaField{validator}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{f}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{redeemer}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{r}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{o}\AgdaSymbol{)}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[7]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{outputRef}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{o}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{validator}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{f}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{redeemer}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{r}\AgdaSymbol{\}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.resolvedInputs}\AgdaSpace{}%
\AgdaBound{vt}\<%
\\
%
\>[4]\AgdaFunction{is‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{map}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSpace{}%
\AgdaFunction{ris}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{inputs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{is‚Ä≤}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{outputs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{os}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{forge}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{frg}\AgdaSymbol{\}}\<%
\\
%
\>[4]\AgdaFunction{sÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{stxo‚â°}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.values‚äëÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaFunction{vor}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{stxo‚â°}\AgdaSpace{}%
\AgdaKeyword{rewrite}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{ùî∏.outputRefs}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\<%
\\
%
\>[6]\AgdaFunction{‚â°Àò‚ü®}\AgdaSpace{}%
\AgdaFunction{L.map-compose}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaSymbol{(}\AgdaField{ùî∏.outputRef}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{ris}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{map‚àòmapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{ùî∏.outputRef}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà-cong}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.resolved}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{‚àà-map‚Å∫}\AgdaSpace{}%
\AgdaField{‚ÑÇ.outputRef}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°Àò‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà‚àòmap}\AgdaSpace{}%
\AgdaField{‚ÑÇ.outputRef}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.resolved}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{‚ÑÇ.outputRef}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{is}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.resolved}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{‚ÑÇ.values‚äë}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaFunction{vor}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚àé}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{vor‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚äÜÀ¢}}\AgdaSpace{}%
\AgdaFunction{sÃÇ}\<%
\\
%
\>[4]\AgdaFunction{vor‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{B.\AgdaUnderscore{}‚äÜÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{sym}\AgdaSpace{}%
\AgdaFunction{stxo‚â°}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.values‚äÜ‚áí‚äÜÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaFunction{vor}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{pv‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.forge}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{+}}\AgdaSpace{}%
\AgdaFunction{‚àë}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.inputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{value}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaField{ùî∏.outputRef}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{frg}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{+}}\AgdaSpace{}%
\AgdaFunction{‚àë}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{map}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{value}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaField{ùî∏.outputRef}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{frg}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{+}}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaFunction{sum}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{L.map-compose}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{frg}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{+}}\AgdaSpace{}%
\AgdaFunction{‚àë}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{value}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaField{proj‚ÇÇ}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.preservesValues}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{‚àë}\AgdaSpace{}%
\AgdaFunction{os}\AgdaSpace{}%
\AgdaField{value}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{‚àë}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaField{value}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{inputInfo‚â°}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaSymbol{(}\AgdaFunction{ùî∏.mkInputInfo}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{ùî∏.resolveInputs}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ùî∏.resolved}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSymbol{))}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{map‚àòmapWith‚àà}\AgdaSpace{}%
\AgdaFunction{ùî∏.mkInputInfo}\AgdaSpace{}%
\AgdaFunction{is‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{goI}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà‚àòmap}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà-cong}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà‚âómap}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.mkInputInfo}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{ris}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{aiv‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{i}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àà}}\AgdaSpace{}%
\AgdaFunction{is‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaFunction{T}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.validator}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ùî∏.mkTxInfo}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{ùî∏.resolved}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.redeemer}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{aiv‚Ä≤}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{i‚àà}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\ ‚Üê\ \AgdaFunction{‚àà-map‚Åª}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
%
\>[6]\AgdaKeyword{rewrite}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[8][@{}l@{\AgdaIndent{0}}]%
\>[10]\AgdaFunction{ùî∏.mkTxInfo}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ùî∏.resolved}\AgdaSpace{}%
\AgdaFunction{tÃÇ}\AgdaSymbol{)}\<%
\\
%
\>[8]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{inputs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{outputs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{os}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{forge}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{frg}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaFunction{inputInfo‚â°}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[8][@{}l@{\AgdaIndent{0}}]%
\>[10]\AgdaFunction{‚ÑÇ.mkTxInfo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.resolved}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\<%
\\
%
\>[8]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\>[6]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{i‚àà}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\ ‚Üê\ \AgdaFunction{‚àà-mapWith‚àà‚Åª}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
%
\>[6]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{L.All.lookup}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.allInputsValidate}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{vvh‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{i}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àà}}\AgdaSpace{}%
\AgdaFunction{is‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.outputRef}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{address}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{i}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.validator}\AgdaSpace{}%
\AgdaOperator{\AgdaPostulate{‚ôØ}}\<%
\\
%
\>[4]\AgdaFunction{vvh‚Ä≤}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
\>[4][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{i‚àà}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\ ‚Üê\ \AgdaFunction{‚àà-map‚Åª}\AgdaSpace{}%
\AgdaFunction{goI}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
%
\>[6]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{L.All.lookup}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.validateValidHashes}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{i‚àà}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{absT}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{ùî∏.Tx}\<%
\\
\>[0]\AgdaFunction{absT}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaField{proj‚ÇÅ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absVT}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{absS-utxo}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.utxoTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaFunction{ùî∏.utxoTx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{absS-utxo}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{fromList}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{))}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{fromList}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{))}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.valuesÀ¢‚àòfromList}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaPostulate{‚ÑÇ.Unique-mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaField{fromList}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{))}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaField{fromList}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaOperator{\AgdaFunction{\$}}%
\>[495I]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[495I][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
\>[495I][@{}l@{\AgdaIndent{0}}]%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{map‚àòmapWith‚àà}\AgdaSpace{}%
\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.mkUtxo}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà-cong}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{mapWith‚àà}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{o}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{o}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{mapWith‚àà‚âómap}\AgdaSpace{}%
\AgdaFunction{id}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaFunction{map}\AgdaSpace{}%
\AgdaFunction{id}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\<%
\\
%
\>[6]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{L.map-id}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[6][@{}l@{\AgdaIndent{0}}]%
\>[8]\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\<%
\\
%
\>[6]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\>[3]\AgdaFunction{‚ü©}\<%
\\
\>[3][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaField{fromList}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{‚ÑÇ.outputs}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaField{fromList}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{ùî∏.outputs}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{absS-stxo}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{absS-stxo}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{@}\AgdaKeyword{record}\AgdaSymbol{\{}\AgdaField{outputs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{os}\AgdaSymbol{\}\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{@}\AgdaKeyword{record}\AgdaSymbol{\{}\AgdaField{validOutputRefs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{vor}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{let}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.valuesÀ¢-‚îÄ}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaBound{vor}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.values‚äëÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaBound{vor}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°Àò‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{‚à£absVT‚à£.stxo‚â°}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{‚ÑÇ.valuesÀ¢}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚â°‚ü®‚ü©}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
\>[0]\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{let}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{sym}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{M.‚à™}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.utxoTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.valuesÀ¢-‚à™}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.utxoTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaPostulate{‚ÑÇ.s‚ôØt}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚îÄ·µèÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.outputRefs}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚à™}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.utxoTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{B.\AgdaUnderscore{}‚à™}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS-stxo}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚à™}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.utxoTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚à™\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS-utxo}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚îÄ}}\AgdaSpace{}%
\AgdaFunction{ùî∏.stxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{B.‚à™}}\AgdaSpace{}%
\AgdaFunction{ùî∏.utxoTx}\AgdaSpace{}%
\AgdaBound{tÃÇ}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-t}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.Tx}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-t}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{dec-yes}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ÑÇ.isValidTx?}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-tÃÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{ùî∏.Tx}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{ùî∏.IsValidTx}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-tÃÇ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{dec-yes}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ùî∏.isValidTx?}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}
\begin{code}%
\>[0]\<%
\\
\>[0]\AgdaFunction{absVL}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{‚àÉ}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{ùî∏.ValidLedger}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{lÃÇ}\<%
\end{code}
\end{frame}
\begin{frame}{Sound Abstraction: Denotations Coincide}
\begin{code}[hide]%
\>[0]\AgdaFunction{denot-abs-t}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{‚ÑÇ.IsValidTx}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-abs-t}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSymbol{\}\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{denot-tÃÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absVT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{proj‚ÇÇ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°Àò‚ü®}\AgdaSpace{}%
\AgdaFunction{M.map-just}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-t}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{absVL}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{-,}}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\<%
\\
\>[0]\AgdaFunction{absVL}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}\{}\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{t}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{let}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{vtÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absVT}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{s}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vt}\<%
\\
%
\>[4]\AgdaBound{lÃÇ}%
\>[8]\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{vlÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absVL}\AgdaSpace{}%
\AgdaBound{vl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaBound{EQ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaBound{EQ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaBound{vt}\<%
\\
%
\>[2]\AgdaKeyword{in}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vtÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{ùî∏.ValidLedger}\AgdaSpace{}%
\AgdaBound{‚óÜ}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{EQ}\AgdaSpace{}%
\AgdaBound{vlÃÇ}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{absL}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{ùî∏.L}\<%
\\
\>[0]\AgdaFunction{absL}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaField{proj‚ÇÅ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absVL}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-abs‚ÇÄ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-abs‚ÇÄ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{denot-abs‚ÇÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{let}\AgdaSpace{}%
\AgdaBound{sÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{sÃÇ}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{denot-abs‚ÇÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{s}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{absS}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-l}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.L}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{‚ÑÇ.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-l}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{denot-l}\AgdaSpace{}%
\AgdaSymbol{(\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{denot-t}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaFunction{denot-l}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-lÃÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{ùî∏.L}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{ùî∏.ValidLedger}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-lÃÇ}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{denot-lÃÇ}\AgdaSpace{}%
\AgdaSymbol{(\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{denot-tÃÇ}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaFunction{denot-lÃÇ}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}
\begin{center}
\begin{tikzpicture}
  \matrix (m) [row sep = 2cm, column sep = 3cm]
    { $\AB{s}$ \& $\AB{s‚Ä≤}$ \\
      $\AB{sÃÇ}$ \& $\AB{sÃÇ‚Ä≤}$ \\
    };
  \path
    (m-1-1) edge [->] node [left] {$\AF{absS}$} (m-2-1)
    (m-1-2) edge [->] node [right] {$\AF{absS}$} (m-2-2)
    (m-1-1) edge [->] node [above] {$\AR{\mathbb{C}.\llbracket\_\rrbracket}$} (m-1-2)
    (m-2-1) edge [->] node [below] {$\AR{\mathbb{A}.\llbracket\_\rrbracket}\ \AF{\circ}\ \AF{absL}$} (m-2-2)
    ;
\end{tikzpicture}
\end{center}
\vfill
\begin{code}%
\>[0]\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{t}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ä£}}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{rewrite}\AgdaSpace{}%
\AgdaFunction{denot-t}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaFunction{denot-tÃÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absVT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{proj‚ÇÇ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
%
\>[2]\AgdaKeyword{let}\AgdaSpace{}%
\AgdaBound{sÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absT}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{vlÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absVL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{begin}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{tÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{sÃÇ}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-abs-t‚ÇÄ}\AgdaSpace{}%
\AgdaBound{vt}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{denot-lÃÇ}\AgdaSpace{}%
\AgdaBound{vlÃÇ}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°‚ü®}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSpace{}%
\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-abs‚ÇÄ}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaInductiveConstructor{just}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{‚â°Àò‚ü®}\AgdaSpace{}%
\AgdaFunction{M.map-just}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{denot-l}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaFunction{‚ü©}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{t}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß‚ÇÄ}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{))}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{M.Any.Any}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-sound}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(}\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{))}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[2]\AgdaSymbol{(}\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{))}\<%
\\
\>[0]\AgdaFunction{denot-sound}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaBound{Ps}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaBound{Ps}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{denot-sound‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaFunction{‚àô}}\AgdaSpace{}%
\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àô}}%
\>[1245I]\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
\>[.][@{}l@{}]\<[1245I]%
\>[4]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[4]\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{denot-sound‚Ä≤}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaBound{Ps}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚Üë}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\<%
\end{code}
\end{frame}
\begin{frame}{Sound Abstraction}
\begin{code}[hide]%
\>[0]\AgdaComment{\{-\ **\ cannot\ formulate\ soundness\ without\ relating\ to\ a\ specific\ state}\<%
\\
\>[0]\AgdaComment{soundness\ :\ ‚àÄ\ \{P\ Q\ :\ Pred‚ÇÄ\ ùî∏.S\}\ (vl\ :\ ‚ÑÇ.ValidLedger\ \{!!\}\ l)\ ‚Üí}\<%
\\
\>[0]\AgdaComment{\ \ ùî∏.‚ü®\ P\ ‚ü©\ absL\ vl\ ‚ü®\ Q\ ‚ü©}\<%
\\
\>[0]\AgdaComment{\ \ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}\<%
\\
\>[0]\AgdaComment{\ \ ‚ÑÇ.‚ü®\ P\ ‚àò\ absS\ ‚ü©\ l\ ‚ü®\ Q\ ‚àò\ absS\ ‚ü©}\<%
\\
\>[0]\AgdaComment{soundness\ =\ \{!!\}}\<%
\\
\>[0]\AgdaComment{-\}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ universally\ quantifying\ abstract\ ledgers}\<%
\\
\>[0]\AgdaFunction{soundness-‚àÄlÃÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred‚ÇÄ}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{(‚àÄ}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaBound{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[4]\AgdaOperator{\AgdaFunction{‚ÑÇ.‚ü®}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à©}}\AgdaSpace{}%
\AgdaFunction{flip}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
\>[0]\AgdaFunction{soundness-‚àÄlÃÇ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaBound{P}\AgdaSymbol{\}\{}\AgdaBound{Q}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Ps}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{MAny-map‚Åª}\AgdaSpace{}%
\AgdaFunction{Qs}\<%
\\
%
\>[2]\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{sÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\<%
\\
%
\>[4]\AgdaFunction{lÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{QsÃÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaFunction{sÃÇ}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{QsÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaFunction{lÃÇ}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{QsÃÇ}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ universally\ quantifying\ proofs\ of\ validity}\<%
\\
\>[0]\AgdaFunction{soundness-‚àÄvl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred‚ÇÄ}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚ÑÇ.‚ü®}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à©}}\AgdaSpace{}%
\AgdaFunction{flip}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
\>[0]\AgdaFunction{soundness-‚àÄvl}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaBound{P}\AgdaSymbol{\}\{}\AgdaBound{Q}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Ps}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{MAny-map‚Åª}\AgdaSpace{}%
\AgdaFunction{Qs}\<%
\\
%
\>[2]\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{sÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\<%
\\
%
\>[4]\AgdaFunction{lÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{QsÃÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{lÃÇ}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaFunction{sÃÇ}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{QsÃÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaField{<\$>}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚ÑÇ.‚ü¶}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{QsÃÇ}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ alternative\ formulation\ using\ "strong"\ abstract\ Hoare\ triples}\<%
\\
\>[0]\AgdaOperator{\AgdaFunction{ùî∏‚ü®\AgdaUnderscore{}‚ü©\AgdaUnderscore{}‚ä£\AgdaUnderscore{}‚ü®\AgdaUnderscore{}‚ü©}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(‚àÄ}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaBound{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Pred‚ÇÄ}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Type}\<%
\\
\>[0]\AgdaOperator{\AgdaFunction{ùî∏‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä£}}\AgdaSpace{}%
\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{(‚àÄ}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{p}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚Üë‚àò}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaBound{p}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{semi-soundness}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Pred‚ÇÄ}\AgdaSpace{}%
\AgdaFunction{ùî∏.S}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaBound{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚àô}}%
\>[1488I]\AgdaOperator{\AgdaFunction{ùî∏‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä£}}\AgdaSpace{}%
\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
\>[.][@{}l@{}]\<[1488I]%
\>[4]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[4]\AgdaOperator{\AgdaFunction{‚ÑÇ.‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
\>[0]\AgdaFunction{semi-soundness}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaBound{P}\AgdaSymbol{\}\{}\AgdaBound{Q}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{MAny-map‚Åª}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaFunction{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{Qs}\<%
\\
%
\>[2]\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{vl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{P‚áí}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚Üë‚àò}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaFunction{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ Reasoning\ on\ the\ abstract\ level\ is\ sound;\ proving\ an\ abstract\ Hoare\ triple}\<%
\\
\>[0]\AgdaComment{--\ is\ enough\ to\ prove\ a\ concrete\ Hoare\ triple\ (with\ abstract\ pre-/post-conditions).}\<%
\end{code}
\begin{AgdaAlign}
\begin{code}%
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{:}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{vl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{‚ÑÇ.ValidLedger}\AgdaSpace{}%
\AgdaGeneralizable{s}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\end{code}
\begin{code}[hide]%
%
\>[2]\AgdaKeyword{let}%
\>[1544I]\AgdaOperator{\AgdaBound{ùî∏‚ü®\AgdaUnderscore{}‚ü©\AgdaUnderscore{}‚ü®\AgdaUnderscore{}‚ü©}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
\>[.][@{}l@{}]\<[1544I]%
\>[6]\AgdaOperator{\AgdaBound{ùî∏‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©Ôº†}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaGeneralizable{s}\<%
\\
%
\>[6]\AgdaOperator{\AgdaBound{‚ÑÇ‚ü®\AgdaUnderscore{}‚ü©\AgdaUnderscore{}‚ü®\AgdaUnderscore{}‚ü©}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\<%
\\
%
\>[6]\AgdaOperator{\AgdaBound{‚ÑÇ‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ÑÇ.‚ü®}}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü®}}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©Ôº†}}\AgdaSpace{}%
\AgdaGeneralizable{s}\<%
\\
%
\>[2]\AgdaKeyword{in}\<%
\end{code}
\begin{code}%
%
\>[2]\AgdaOperator{\AgdaBound{ùî∏‚ü®}}\AgdaSpace{}%
\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü®}}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\<%
\\
%
\>[2]\AgdaOperator{\AgdaFunction{‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ}}\<%
\\
%
\>[2]\AgdaOperator{\AgdaBound{‚ÑÇ‚ü®}}\AgdaSpace{}%
\AgdaGeneralizable{P}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\AgdaSpace{}%
\AgdaGeneralizable{l}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü®}}\AgdaSpace{}%
\AgdaGeneralizable{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àò}}\AgdaSpace{}%
\AgdaFunction{absS}\AgdaSpace{}%
\AgdaOperator{\AgdaBound{‚ü©}}\<%
\end{code}
\end{AgdaAlign}
\begin{code}[hide]%
\>[0]\AgdaFunction{soundness}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{s}\AgdaSymbol{\}\{}\AgdaBound{l}\AgdaSymbol{\}\{}\AgdaBound{P}\AgdaSymbol{\}\{}\AgdaBound{Q}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{MAny-map‚Åª}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\$}}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{M.Any.Any}\AgdaSpace{}%
\AgdaBound{Q}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{denot-abs}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaFunction{Qs}\<%
\\
%
\>[2]\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Q}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{ùî∏.‚Üë‚àò}}\AgdaSpace{}%
\AgdaOperator{\AgdaField{ùî∏.‚ü¶}}\AgdaSpace{}%
\AgdaFunction{absL}\AgdaSpace{}%
\AgdaBound{vl}\AgdaSpace{}%
\AgdaOperator{\AgdaField{‚üß}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{absS}\AgdaSpace{}%
\AgdaBound{s}\AgdaSymbol{)}\<%
\\
%
\>[4]\AgdaFunction{Qs}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{PlQ}\AgdaSpace{}%
\AgdaBound{Ps}\<%
\end{code}
\end{frame}
\end{document}
