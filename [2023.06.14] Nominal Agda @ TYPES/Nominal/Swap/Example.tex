\documentclass[main]{subfiles}
\begin{document}
\section*{Nominal/Swap/Example.agda}
\begin{code}%
\>[0]\AgdaSymbol{\{-\#}\AgdaSpace{}%
\AgdaKeyword{OPTIONS}\AgdaSpace{}%
\AgdaPragma{-v}\AgdaSpace{}%
\AgdaPragma{nominal:100}\AgdaSpace{}%
\AgdaSymbol{\#-\}}\<%
\\
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{Nominal.Swap.Example}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.Init}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{SetAsType}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Prelude.DecEq}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ instantiate\ atoms\ to\ be\ the\ natural\ numbers}\<%
\\
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaDatatype{Atom}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaInductiveConstructor{`\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{ℕ}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{Atom}\<%
\\
\>[0]\AgdaKeyword{unquoteDecl}\AgdaSpace{}%
\AgdaFunction{DecEq-Atom}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaMacro{DERIVE}\AgdaSpace{}%
\AgdaRecord{DecEq}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaKeyword{quote}\AgdaSpace{}%
\AgdaDatatype{Atom}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaFunction{DecEq-Atom}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]}}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Nominal.Swap}\AgdaSpace{}%
\AgdaDatatype{Atom}\<%
\\
\>[0]\AgdaFunction{𝕒}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaNumber{0}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaNumber{1}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaDatatype{λTerm}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}-APP-\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{λTerm}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{λTerm}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{λTerm}\<%
\\
%
\>[2]\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Atom}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{λTerm}\<%
\\
\>[0]\AgdaComment{--\ \{-\#\ TERMINATING\ \#-\}}\<%
\\
\>[0]\AgdaComment{--\ unquoteDecl\ λTerm↔\ =\ DERIVE\ Swap\ [\ quote\ λTerm\ ,\ λTerm↔\ ]}\<%
\\
\>[0]\AgdaKeyword{instance}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{λTerm↔}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Swap}\AgdaSpace{}%
\AgdaDatatype{λTerm}\<%
\\
%
\>[2]\AgdaFunction{λTerm↔}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{swap}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{λ}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaSymbol{λ}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{(}\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{-APP-}}\AgdaSpace{}%
\AgdaBound{r}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaBound{l}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{-APP-}}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaBound{r}\<%
\\
%
\>[4]\AgdaSymbol{(}\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}%
\>[16]\AgdaSymbol{→}\AgdaSpace{}%
\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ example\ swapping\ in\ a\ λ-term}\<%
\\
\>[0]\AgdaFunction{\AgdaUnderscore{}}%
\>[83I]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{-APP-}}\AgdaSpace{}%
\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{-APP-}}\AgdaSpace{}%
\AgdaInductiveConstructor{VAR}\AgdaSpace{}%
\AgdaFunction{𝕒}\<%
\\
\>[.][@{}l@{}]\<[83I]%
\>[2]\AgdaOperator{\AgdaFunction{∋}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ **\ derive\ and\ check\ ad-hoc\ example\ datatypes}\<%
\\
\>[0]\AgdaKeyword{record}\AgdaSpace{}%
\AgdaRecord{TESTR}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{field}\AgdaSpace{}%
\AgdaField{atom}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Atom}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaModule{TESTR}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaComment{--\ [T0D0]\ derive\ outside\ module}\<%
\\
\>[0]\AgdaComment{--\ unquoteDecl\ TESTR↔\ =\ DERIVE\ Swap\ [\ quote\ TESTR\ ,\ TESTR↔\ ]}\<%
\\
\>[0]\AgdaKeyword{instance}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{TESTR↔}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Swap}\AgdaSpace{}%
\AgdaRecord{TESTR}\<%
\\
%
\>[2]\AgdaFunction{TESTR↔}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{atom}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{atom}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{\}}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{atom}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaField{atom}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{∋}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaDatatype{TEST}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaInductiveConstructor{ATOM}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Atom}\AgdaSpace{}%
\AgdaSymbol{→}\AgdaSpace{}%
\AgdaDatatype{TEST}\<%
\\
\>[0]\AgdaComment{--\ unquoteDecl\ TEST↔\ =\ DERIVE\ Swap\ [\ quote\ TEST\ ,\ TEST↔\ ]}\<%
\\
\>[0]\AgdaKeyword{instance}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{TEST↔}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Swap}\AgdaSpace{}%
\AgdaDatatype{TEST}\<%
\\
%
\>[2]\AgdaFunction{TEST↔}\AgdaSpace{}%
\AgdaSymbol{.}\AgdaField{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ATOM}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{ATOM}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaBound{𝕒}\AgdaSpace{}%
\AgdaBound{𝕓}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{\AgdaUnderscore{}}%
\>[162I]\AgdaSymbol{=}\AgdaSpace{}%
\AgdaPostulate{swap}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSpace{}%
\AgdaFunction{𝕓}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{ATOM}\AgdaSpace{}%
\AgdaFunction{𝕒}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{≡}}\AgdaSpace{}%
\AgdaInductiveConstructor{ATOM}\AgdaSpace{}%
\AgdaFunction{𝕓}\<%
\\
\>[.][@{}l@{}]\<[162I]%
\>[2]\AgdaOperator{\AgdaFunction{∋}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}
\end{document}
